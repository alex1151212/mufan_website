{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from '../api/axios';\nimport useAuth from './useAuth';\n\nconst useRefreshToken = () => {\n  _s();\n\n  const {\n    setAuth\n  } = useAuth();\n\n  const refresh = async () => {\n    const response = await axios.get('/refresh', {\n      withCredentials: true\n    });\n    setAuth(prev => {\n      console.log(JSON.stringify(prev));\n      console.log(response.data.accessToken);\n      return { ...prev,\n        roles: response.data.roles,\n        accessToken: response.data.accessToken\n      };\n    });\n    return response.data.accessToken;\n  };\n\n  return refresh;\n};\n\n_s(useRefreshToken, \"kM+3qTo8R5QL0/6u1eNqRnijxN4=\", false, function () {\n  return [useAuth];\n});\n\nexport default useRefreshToken;","map":{"version":3,"sources":["D:/FASTAPI_/mufan_/frontend/src/hooks/useRefreshToken.js"],"names":["axios","useAuth","useRefreshToken","setAuth","refresh","response","get","withCredentials","prev","console","log","JSON","stringify","data","accessToken","roles"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,cAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;;AAEA,MAAMC,eAAe,GAAG,MAAK;AAAA;;AACzB,QAAM;AAACC,IAAAA;AAAD,MAAYF,OAAO,EAAzB;;AAEA,QAAMG,OAAO,GAAG,YAAW;AACvB,UAAMC,QAAQ,GAAG,MAAML,KAAK,CAACM,GAAN,CAAU,UAAV,EAAqB;AACxCC,MAAAA,eAAe,EAAC;AADwB,KAArB,CAAvB;AAGAJ,IAAAA,OAAO,CAACK,IAAI,IAAI;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,SAAL,CAAeJ,IAAf,CAAZ;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYL,QAAQ,CAACQ,IAAT,CAAcC,WAA1B;AACA,aAAO,EACH,GAAGN,IADA;AAEHO,QAAAA,KAAK,EAACV,QAAQ,CAACQ,IAAT,CAAcE,KAFjB;AAGHD,QAAAA,WAAW,EAACT,QAAQ,CAACQ,IAAT,CAAcC;AAHvB,OAAP;AAIF,KAPK,CAAP;AAQC,WAAOT,QAAQ,CAACQ,IAAT,CAAcC,WAArB;AACJ,GAbD;;AAcA,SAAOV,OAAP;AACH,CAlBD;;GAAMF,e;UACgBD,O;;;AAmBtB,eAAeC,eAAf","sourcesContent":["import axios from '../api/axios';\r\nimport useAuth from './useAuth';\r\n\r\nconst useRefreshToken = () =>{\r\n    const {setAuth} = useAuth();\r\n\r\n    const refresh = async () =>{\r\n        const response = await axios.get('/refresh',{\r\n            withCredentials:true\r\n        });\r\n        setAuth(prev => {\r\n            console.log(JSON.stringify(prev));\r\n            console.log(response.data.accessToken);\r\n            return {\r\n                ...prev,\r\n                roles:response.data.roles,\r\n                accessToken:response.data.accessToken}\r\n         });\r\n         return response.data.accessToken;\r\n    }\r\n    return refresh;\r\n};\r\n\r\nexport default useRefreshToken;"]},"metadata":{},"sourceType":"module"}